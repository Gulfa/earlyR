<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Early Outbreak Infectiousness Assessment  • earlyR</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">earlyR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/reconhub/earlyR/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">

<div id="welcome-to-the-earlyr-package" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#welcome-to-the-earlyr-package" class="anchor"></a>Welcome to the <em>earlyR</em> package!</h1></div>
<p>This package implements simple estimation of infectiousness, as measured by the reproduction number (R), in the early stages of an outbreak. This estimation requires:</p>
<ul>
<li><p><strong>prior knowledge</strong>: the <strong>serial interval</strong> distribution, defined as the <em>mean</em> and <em>standard deviation</em> of the (Gamma) distribution. In general, these parameters are best taken from the literature.</p></li>
<li><p><strong>data</strong>: the daily <strong>incidence</strong> of the disease, including <strong>only confirmed and probable</strong> cases.</p></li>
</ul>
<div id="installing-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>Installing the package</h2>
<p>To install the current stable, CRAN version of the package, type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"earlyR"</span>)</code></pre></div>
<p>To benefit from the latest features and bug fixes, install the development, <em>github</em> version of the package using:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"reconhub/earlyR"</span>)</code></pre></div>
<p>Note that this requires the package <em>devtools</em> installed.</p>
</div>
</div>
<div id="what-does-it-do" class="section level1">
<h1 class="hasAnchor">
<a href="#what-does-it-do" class="anchor"></a>What does it do?</h1>
<p>The main features of the package include:</p>
<ul>
<li><p><strong><code>get_R</code></strong>: a function to estimate <em>R</em> as well as the force of infection over time, from incidence data; output is an object of class <code>earlyR</code></p></li>
<li><p><strong><code>sample_R</code></strong>: a function to obtain a sample of likely <em>R</em> values</p></li>
<li><p><strong><code>plot</code></strong>: a function to visualise <code>earlyR</code> objects (<em>R</em> or force of infection).</p></li>
<li><p><strong><code>points</code></strong>: a function using <code>earlyR</code> objects to add the force of infection to an existing plot.</p></li>
</ul>
</div>
<div id="resources" class="section level1">
<h1 class="hasAnchor">
<a href="#resources" class="anchor"></a>Resources</h1>
<div id="worked-example" class="section level2">
<h2 class="hasAnchor">
<a href="#worked-example" class="anchor"></a>Worked example</h2>
<p>This example is a simplified version of the introductory vignette (see section below), where <code>earlyR</code> is used in conjunction with other packages to assess infectiousness and growth potential of an early Ebola Virus Disease (EVD) outbreak. Here, we simply illustrate how <code>earlyR</code> can be used for assessing infectiousness based on a few confirmed/probable cases.</p>
<p>In this example we assume a small outbreak of Ebola Virus Disease (EVD), for which the serial interval has been previously characterised. We study a fake outbreak, for which we will quantify infectiousness (R), and then project future incidence using the package <a href="https://github.com/reconhub/projections"><em>projections</em></a>.</p>
<p>The fake data we consider consist of confirmed cases with the following symptom onset dates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">onset &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">c</span>(<span class="st">"2017-02-04"</span>, <span class="st">"2017-02-12"</span>, <span class="st">"2017-02-15"</span>,
                   <span class="st">"2017-02-23"</span>, <span class="st">"2017-03-01"</span>, <span class="st">"2017-03-01"</span>,
           <span class="st">"2017-03-02"</span>, <span class="st">"2017-03-03"</span>, <span class="st">"2017-03-03"</span>))        </code></pre></div>
<p>We assume the current date is 21st March. We compute the daily incidence using the package <a href="https://github.com/reconhub/incidence"><em>incidence</em></a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(incidence)
today &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"2017-03-21"</span>)
i &lt;-<span class="st"> </span><span class="kw">incidence</span>(onset, <span class="dt">last_date =</span> today)
i</code></pre></div>
<pre><code>## &lt;incidence object&gt;
## [9 cases from days 2017-02-04 to 2017-03-21]
## 
## $counts: matrix with 46 rows and 1 columns
## $n: 9 cases in total
## $dates: 46 dates marking the left-side of bins
## $interval: 1 day
## $timespan: 46 days</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(i, <span class="dt">border =</span> <span class="st">"white"</span>)</code></pre></div>
<p><img src="index_files/figure-html/incidence-1.png" width="672"></p>
<p><strong>Note:</strong> It is <strong>very important to make sure that the last days without cases are included here</strong>. Omitting this information would lead to an over-estimation of the reproduction number (<em>R</em>).</p>
<p>For estimating <em>R</em>, we need estimates of the mean and standard deviation of the serial interval, i.e. the delay between primary and secondary symptom onset dates. This has been quantified durin the West African EVD outbreak (WHO Ebola Response Team (2014) NEJM 371:1481–1495):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mu &lt;-<span class="st"> </span><span class="fl">15.3</span> <span class="co"># mean in days days</span>
sigma &lt;-<span class="st"> </span><span class="fl">9.3</span> <span class="co"># standard deviation in days</span></code></pre></div>
<p>The function <code>get_R</code> is then used to estimate the most likely values of <em>R</em>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(earlyR)

res &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_R.html">get_R</a></span>(i, <span class="dt">si_mean =</span> mu, <span class="dt">si_sd =</span> sigma)
res</code></pre></div>
<pre><code>## 
## /// Early estimate of reproduction number (R) //
##  // class: earlyR, list
## 
##  // Maximum-Likelihood estimate of R ($R_ml):
## [1] 1.021021
## 
## 
##  // $lambda:
##   0.01838179 0.0273192 0.03514719 0.0414835 0.04623398 0.04946402...
## 
##  // $dates:
## [1] "2017-02-05" "2017-02-06" "2017-02-07" "2017-02-08" "2017-02-09"
## [6] "2017-02-10"
## ...
## 
##  // $si (serial interval):
## A discrete distribution
##   name: gamma
##   parameters:
##     shape: 2.70655567117586
##     scale: 5.65294117647059</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(res)</code></pre></div>
<p><img src="index_files/figure-html/estimate-1.png" width="672"></p>
<p>The first figure shows the distribution of likely values of <em>R</em>, and the Maximum-Likelihood (ML) estimation. To derive other statistics for this distribution, we can use <code>sample_R</code> to get a large sample of likely <em>R</em> values, and then compute statistics on this sample:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">R_val &lt;-<span class="st"> </span><span class="kw"><a href="reference/sample_R.html">sample_R</a></span>(res, <span class="dv">1000</span>)
<span class="kw">summary</span>(R_val) <span class="co"># basic stats</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##  0.3604  0.8609  1.1261  1.1642  1.3914  2.6827</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">quantile</span>(R_val) <span class="co"># quartiles</span></code></pre></div>
<pre><code>##        0%       25%       50%       75%      100% 
## 0.3603604 0.8608609 1.1261261 1.3913914 2.6826827</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">quantile</span>(R_val, <span class="kw">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>)) <span class="co"># 95% credibility interval</span></code></pre></div>
<pre><code>##      2.5%     97.5% 
## 0.5501752 2.0629379</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(R_val, <span class="dt">border =</span> <span class="st">"grey"</span>, <span class="dt">col =</span> <span class="st">"navy"</span>,
     <span class="dt">xlab =</span> <span class="st">"Values of R"</span>,
     <span class="dt">main =</span> <span class="st">"Sample of likely R values"</span>)</code></pre></div>
<p><img src="index_files/figure-html/samples-1.png" width="672"></p>
<p>Finally, we can also represent infectiousness over time using:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(res, <span class="st">"lambdas"</span>, <span class="dt">scale =</span> <span class="kw">length</span>(onset) +<span class="st"> </span><span class="dv">1</span>)
<span class="kw">abline</span>(<span class="dt">v =</span> onset, <span class="dt">lwd =</span> <span class="dv">3</span>, <span class="dt">col =</span> <span class="st">"grey"</span>)
<span class="kw">abline</span>(<span class="dt">v =</span> today, <span class="dt">col =</span> <span class="st">"blue"</span>, <span class="dt">lty =</span> <span class="dv">2</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)
<span class="kw">points</span>(onset, <span class="kw">seq_along</span>(onset), <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">cex =</span> <span class="dv">3</span>)</code></pre></div>
<p><img src="index_files/figure-html/lamdbas-1.png" width="672"></p>
<p>This figure shows the global force of infection over time, with vertical grey bars indicating the presence of cases, and dots showing the dates of symptom of onset. The dashed blue line indicates current day. Note that the vertical scale for the bars is arbitrary, and only represents the relative force of infection.</p>
</div>
<div id="vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#vignettes" class="anchor"></a>Vignettes</h2>
<p>`Currently available vignettes can be accessed from <em>R</em> using:</p>
<ul>
<li>
<code><a href="articles/earlyR.html">vignette("earlyR")</a></code>: an introduction to <code>earlyR</code> using a simulated Ebola Virus Disease (EVD) outbreak; includes projections of future incidence using <em>projections</em>.</li>
</ul>
</div>
<div id="websites" class="section level2">
<h2 class="hasAnchor">
<a href="#websites" class="anchor"></a>Websites</h2>
<p>A dedicated website is still in development.</p>
</div>
<div id="getting-help-online" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-help-online" class="anchor"></a>Getting help online</h2>
<p>Bug reports and feature requests should be posted on <em>github</em> using the <a href="http://github.com/reconhub/earlyR/issues"><em>issue</em></a> system. All other questions should be posted on the <strong>RECON forum</strong>: <br><a href="http://www.repidemicsconsortium.org/forum/" class="uri">http://www.repidemicsconsortium.org/forum/</a></p>
<p>Contributions are welcome via <strong>pull requests</strong>.</p>
<p>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/reconhub/earlyR/">https://​github.com/​reconhub/​earlyR/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/reconhub/earlyR/issues">https://​github.com/​reconhub/​earlyR/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Thibaut Jombart <br><small class="roles"> Author, maintainer </small> </li>
<li>Anne Cori <br><small class="roles"> Author </small> </li>
<li>Pierre Nouvellet <br><small class="roles"> Author </small> </li>
</ul>
<div>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/reconhub/earlyR"><img src="https://travis-ci.org/reconhub/earlyR.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/thibautjombart/earlyr/branch/master"><img src="https://ci.appveyor.com/api/projects/status/spq4patqkwrtlcgt/branch/master?svg=true" alt="Build status"></a></li>
<li><a href="https://codecov.io/github/reconhub/earlyR?branch=master"><img src="https://codecov.io/github/reconhub/earlyR/coverage.svg?branch=master" alt="codecov.io"></a></li>
<li><a href="https://cran.r-project.org/package=earlyR"><img src="http://www.r-pkg.org/badges/version/earlyR" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Thibaut Jombart, Anne Cori, Pierre Nouvellet.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
